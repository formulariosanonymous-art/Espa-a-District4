<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Espa√±a District | Premium System</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2575fc;
            --accent: #6a11cb;
            --bg: #f0f2f5;
            --white: #ffffff;
            --text: #1a1a1a;
            --grad: linear-gradient(135deg, var(--accent) 0%, var(--primary) 100%);
        }

        body { margin: 0; font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); transition: 0.3s; }

        /* HEADER GLASSMORPHISM */
        .header { 
            position: fixed; top: 0; width: 100%; height: 75px; 
            background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px);
            display: flex; align-items: center; justify-content: space-between; 
            padding: 0 25px; box-sizing: border-box; z-index: 100; 
            border-bottom: 1px solid rgba(255,255,255,0.3); box-shadow: 0 4px 30px rgba(0,0,0,0.05);
        }

        /* SIDEBAR ESTILIZADA */
        .sidebar { 
            position: fixed; right: -320px; top: 0; width: 300px; height: 100%; 
            background: var(--white); z-index: 999; transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1); 
            padding: 30px; box-shadow: -10px 0 30px rgba(0,0,0,0.1); display: flex; flex-direction: column; 
        }
        .sidebar.open { right: 0; }
        .nav-item { 
            padding: 16px; border-radius: 15px; margin-bottom: 10px; cursor: pointer; 
            font-weight: 600; display: flex; align-items: center; gap: 15px; transition: 0.3s;
            background: #f8f9fa; border: 1px solid transparent;
        }
        .nav-item:hover { background: var(--bg); border-color: var(--primary); transform: translateX(-5px); }

        /* PANTALLA DE LOGIN PREMIUM */
        #login-screen { 
            position: fixed; inset: 0; background: var(--grad); z-index: 2000; 
            display: none; align-items: center; justify-content: center; 
        }
        .login-card { 
            background: rgba(255,255,255,0.95); padding: 45px; border-radius: 30px; 
            width: 90%; max-width: 400px; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            backdrop-filter: blur(5px); border: 1px solid rgba(255,255,255,0.3);
        }

        /* VISTAS */
        .view { display: none; flex-direction: column; align-items: center; padding: 110px 20px 50px; min-height: 100vh; box-sizing: border-box; }
        .view.active { display: flex; animation: slideUp 0.5s ease; }
        @keyframes slideUp { from { opacity:0; transform: translateY(20px); } to { opacity:1; transform: translateY(0); } }

        /* CARDS Y ELEMENTOS */
        .card { 
            background: var(--white); padding: 25px; border-radius: 24px; width: 100%; max-width: 550px; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.03); margin-bottom: 20px; border: 1px solid #f0f0f0;
        }
        .btn { 
            border: none; border-radius: 15px; font-weight: 700; cursor: pointer; 
            transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .btn-primary { background: var(--grad); color: white; padding: 15px 30px; }
        .btn-primary:hover { transform: scale(1.03); box-shadow: 0 8px 25px rgba(37, 117, 252, 0.4); }

        /* INPUTS ESTILIZADOS */
        input, textarea, select { 
            width: 100%; padding: 15px; margin: 10px 0; border: 2px solid #eee; 
            border-radius: 15px; background: #fff; font-family: inherit; transition: 0.3s;
        }
        input:focus { border-color: var(--primary); outline: none; background: #fcfdfe; }

        /* SECCIONES DE ADMIN */
        .admin-tabs { display: flex; gap: 10px; margin-bottom: 25px; overflow-x: auto; width: 100%; max-width: 550px; padding-bottom: 5px; }
        .tab-btn { 
            padding: 10px 20px; border-radius: 12px; border: none; background: #ddd; 
            font-weight: 600; cursor: pointer; white-space: nowrap; transition: 0.3s;
        }
        .tab-btn.active { background: var(--primary); color: white; }

        /* ACCORDION PUBLIC */
        .sec-header { 
            width: 100%; max-width: 550px; padding: 20px; border-radius: 20px; 
            background: var(--grad); color: white; font-weight: 800; cursor: pointer;
            display: flex; justify-content: space-between; margin-top: 15px;
        }
    </style>
</head>
<body>

    <div id="login-screen">
        <div class="login-card">
            <div style="font-size: 40px; margin-bottom: 10px;">üîê</div>
            <h2 id="login-title">Staff Access</h2>
            <input type="password" id="admin-pass" placeholder="Contrase√±a de Administrador">
            <button class="btn btn-primary" style="width:100%" onclick="checkPass()">Entrar al Panel</button>
            <p onclick="closeLogin()" style="cursor:pointer; font-size: 13px; color: var(--primary); margin-top: 20px; font-weight: 600;">Regresar al inicio</p>
        </div>
    </div>

    <header class="header">
        <div id="brand-logo" style="font-weight: 900; font-size: 20px; letter-spacing: -1px;">ESPA√ëA <span style="color:var(--primary)">DISTRICT</span></div>
        <button class="menu-icon" onclick="openSidebar()">‚ò∞</button>
    </header>

    <div class="sidebar" id="sidebar">
        <div>
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">
                <span style="font-weight: 800; color: var(--primary);">NAVEGACI√ìN</span>
                <button onclick="closeSidebar()" style="background:none; border:none; font-size: 25px; cursor:pointer;">√ó</button>
            </div>
            <div class="nav-item" onclick="navigate('home')">üè† Inicio</div>
            <div class="nav-item" onclick="navigate('public')">üìú Normativas</div>
            <div class="nav-item" onclick="openAdmin()">üõ†Ô∏è Panel Staff</div>
        </div>
        <div class="sidebar-footer">
            <a href="https://discord.gg/Rp5fumwpUK" target="_blank" class="info-box" style="text-decoration:none;">
                <div style="font-weight:800; font-size:14px;">COMUNIDAD DISCORD</div>
                <div style="font-size:11px; opacity:0.8;">√önete para soporte y noticias</div>
            </a>
        </div>
    </div>

    <section id="view-home" class="view active">
        <img id="main-logo" src="https://i.postimg.cc/Jz743TdL/e77730807aec5f2a5360ef9b416e25f7.png" width="160" style="filter: drop-shadow(0 10px 20px rgba(0,0,0,0.1)); margin-bottom: 20px;">
        <h1 id="home-title" style="font-size: 40px; margin: 0; text-align: center;">Espa√±a District</h1>
        <p id="home-subtitle" style="color:#666; max-width: 400px; text-align: center; line-height: 1.6; margin: 15px 0 30px;">Tu portal centralizado para todas las normativas y reglamentos del servidor.</p>
        <button class="btn btn-primary" onclick="navigate('public')">Ver Normativas Ahora</button>
    </section>

    <section id="view-public" class="view">
        <input type="text" id="search" placeholder="üîç Buscar por palabra clave..." onkeyup="renderPublic()" style="max-width:550px; border:none; box-shadow: 0 10px 30px rgba(0,0,0,0.05);">
        <div id="public-content" style="width:100%; display:flex; flex-direction:column; align-items:center;"></div>
    </section>

    <section id="view-admin" class="view">
        <div style="width:100%; max-width:550px; display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
            <h2 style="margin:0;">Configuraci√≥n Central</h2>
            <button onclick="navigate('home')" style="background:none; border:none; color:var(--danger); font-weight:700; cursor:pointer;">Salir</button>
        </div>

        <div class="admin-tabs">
            <button class="tab-btn active" onclick="switchTab('tab-sec', this)">Categor√≠as</button>
            <button class="tab-btn" onclick="switchTab('tab-norm', this)">Normas</button>
            <button class="tab-btn" onclick="switchTab('tab-style', this)">üé® Personalizar</button>
        </div>

        <div id="tab-sec" class="admin-tab-content" style="width:100%; display:flex; flex-direction:column; align-items:center;">
            <div class="card">
                <h3>Nueva Categor√≠a</h3>
                <input type="text" id="sec-name" placeholder="Ej: Normas Civiles">
                <button class="btn btn-primary" style="width:100%" onclick="saveSection()">+ Crear</button>
            </div>
            <div id="list-sections" style="width:100%; max-width:550px;"></div>
        </div>

        <div id="tab-norm" class="admin-tab-content" style="width:100%; display:none; flex-direction:column; align-items:center;">
            <div class="card">
                <h3>Agregar Norma</h3>
                <select id="norm-target"></select>
                <input type="text" id="norm-title" placeholder="T√≠tulo">
                <textarea id="norm-desc" rows="4" placeholder="Contenido..."></textarea>
                <input type="file" id="norm-file" accept="image/*">
                <button class="btn btn-primary" style="width:100%" onclick="saveNorma()">Guardar Norma</button>
            </div>
            <div id="list-norms" style="width:100%; max-width:550px;"></div>
        </div>

        <div id="tab-style" class="admin-tab-content" style="width:100%; display:none; flex-direction:column; align-items:center;">
            <div class="card">
                <h3>Inicio e Imagen</h3>
                <label>URL Logo Principal:</label>
                <input type="text" id="set-logo" placeholder="URL de la imagen">
                <label>T√≠tulo de Inicio:</label>
                <input type="text" id="set-title" placeholder="Espa√±a District">
                <label>Subt√≠tulo de Inicio:</label>
                <textarea id="set-subtitle" placeholder="Escribe el mensaje de bienvenida..."></textarea>
            </div>
            <div class="card">
                <h3>Colores del Tema</h3>
                <label>Color Principal:</label>
                <input type="color" id="color-p" value="#2575fc">
                <label>Color Secundario (Degradado):</label>
                <input type="color" id="color-a" value="#6a11cb">
                <button class="btn btn-primary" style="width:100%; margin-top:15px;" onclick="applyStyles()">Aplicar Cambios Est√©ticos</button>
            </div>
        </div>
    </section>

    <script>
        const WEBHOOK = "https://discord.com/api/webhooks/1474271939697705111/beTyfVivPaHokNQvnPw5SSkaY74Yb6C1SCKBNpj-SM2EfXBBhNT-YtvlecFYCkl4vAR4";
        let db = JSON.parse(localStorage.getItem('esp_v8')) || [];
        let config = JSON.parse(localStorage.getItem('esp_config')) || {
            logo: 'https://i.postimg.cc/Jz743TdL/e77730807aec5f2a5360ef9b416e25f7.png',
            title: 'Espa√±a District',
            subtitle: 'Tu portal centralizado para todas las normativas y reglamentos del servidor.',
            colorP: '#2575fc',
            colorA: '#6a11cb'
        };

        // CARGA INICIAL
        function init() {
            document.getElementById('main-logo').src = config.logo;
            document.getElementById('home-title').innerText = config.title;
            document.getElementById('home-subtitle').innerText = config.subtitle;
            document.documentElement.style.setProperty('--primary', config.colorP);
            document.documentElement.style.setProperty('--accent', config.colorA);
            // Llenar campos admin
            document.getElementById('set-logo').value = config.logo;
            document.getElementById('set-title').value = config.title;
            document.getElementById('set-subtitle').value = config.subtitle;
            document.getElementById('color-p').value = config.colorP;
            document.getElementById('color-a').value = config.colorA;
            renderAll();
        }

        // SEGURIDAD
        function openAdmin() { closeSidebar(); document.getElementById('login-screen').style.display = 'flex'; }
        function closeLogin() { document.getElementById('login-screen').style.display = 'none'; }
        function checkPass() {
            if(document.getElementById('admin-pass').value === "pampiano17") {
                closeLogin(); navigate('admin');
                document.getElementById('admin-pass').value = "";
            } else { alert("Clave Incorrecta"); }
        }

        // NAVEGACI√ìN
        function openSidebar() { document.getElementById('sidebar').classList.add('open'); }
        function closeSidebar() { document.getElementById('sidebar').classList.remove('open'); }
        function navigate(v) {
            document.querySelectorAll('.view').forEach(x => x.classList.remove('active'));
            document.getElementById('view-' + v).classList.add('active');
            closeSidebar();
        }
        function switchTab(t, b) {
            document.querySelectorAll('.admin-tab-content').forEach(x => x.style.display = 'none');
            document.querySelectorAll('.tab-btn').forEach(x => x.classList.remove('active'));
            document.getElementById(t).style.display = 'flex';
            b.classList.add('active');
        }

        // LOGS DISCORD
        function sendLog(t, d, c) {
            fetch(WEBHOOK, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({embeds: [{title: t, description: d, color: c || 3447003, timestamp: new Date()}]})
            });
        }

        // PERSONALIZACI√ìN
        function applyStyles() {
            config = {
                logo: document.getElementById('set-logo').value,
                title: document.getElementById('set-title').value,
                subtitle: document.getElementById('set-subtitle').value,
                colorP: document.getElementById('color-p').value,
                colorA: document.getElementById('color-a').value
            };
            localStorage.setItem('esp_config', JSON.stringify(config));
            init();
            sendLog("üé® Dise√±o Actualizado", "Se han modificado los colores o textos del portal.", 16776960);
            alert("¬°Est√©tica actualizada!");
        }

        // DATOS
        function saveSection() {
            const val = document.getElementById('sec-name').value;
            if(!val) return;
            db.push({name: val, norms: []});
            document.getElementById('sec-name').value = "";
            save();
            sendLog("üìÅ Nueva Categor√≠a", `Nombre: ${val}`, 3066993);
        }

        async function saveNorma() {
            const sIdx = document.getElementById('norm-target').value;
            const title = document.getElementById('norm-title').value;
            const desc = document.getElementById('norm-desc').value;
            const file = document.getElementById('norm-file').files[0];
            
            const add = (img) => {
                db[sIdx].norms.push({title, desc, img});
                save();
                document.getElementById('norm-title').value = "";
                document.getElementById('norm-desc').value = "";
                sendLog("‚úÖ Norma A√±adida", `T√≠tulo: ${title}`, 3447003);
            };

            if(file) {
                const reader = new FileReader();
                reader.onload = () => add(reader.result);
                reader.readAsDataURL(file);
            } else add("");
        }

        function deleteItem(s, n = null) {
            if(!confirm("¬øBorrar definitivamente?")) return;
            if(n === null) db.splice(s, 1);
            else db[s].norms.splice(n, 1);
            save();
        }

        function save() { localStorage.setItem('esp_v8', JSON.stringify(db)); renderAll(); }

        function renderAll() {
            const lSec = document.getElementById('list-sections');
            const lNorm = document.getElementById('list-norms');
            const select = document.getElementById('norm-target');
            lSec.innerHTML = ""; lNorm.innerHTML = ""; select.innerHTML = "";
            
            db.forEach((s, si) => {
                select.innerHTML += `<option value="${si}">${s.name}</option>`;
                lSec.innerHTML += `<div class="card" style="display:flex; justify-content:space-between; align-items:center; padding:15px;"><b>${s.name}</b><button onclick="deleteItem(${si})" style="color:red; background:none; border:none; cursor:pointer;">üóëÔ∏è</button></div>`;
                s.norms.forEach((n, ni) => {
                    lNorm.innerHTML += `<div class="card" style="display:flex; justify-content:space-between; padding:15px; margin-left:20px; font-size:13px;"><span>${n.title}</span><button onclick="deleteItem(${si},${ni})" style="color:red; background:none; border:none; cursor:pointer;">üóëÔ∏è</button></div>`;
                });
            });
            renderPublic();
        }

        function renderPublic() {
            const cont = document.getElementById('public-content');
            const q = document.getElementById('search').value.toLowerCase();
            cont.innerHTML = "";
            db.forEach((s, si) => {
                const filtered = s.norms.filter(n => n.title.toLowerCase().includes(q) || n.desc.toLowerCase().includes(q));
                if(filtered.length > 0 || s.name.toLowerCase().includes(q)) {
                    cont.innerHTML += `
                        <div class="sec-header" onclick="this.nextElementSibling.style.display = this.nextElementSibling.style.display === 'none' ? 'block' : 'none'">
                            ${s.name} <span>‚ñº</span>
                        </div>
                        <div style="display:none; width:100%; max-width:550px;">
                            ${filtered.map(n => `
                                <div class="card" style="margin-top:10px; width:auto;">
                                    <b style="color:var(--primary); font-size:18px;">${n.title}</b>
                                    <p style="color:#555; line-height:1.6; margin-top:10px;">${n.desc}</p>
                                    ${n.img ? `<img src="${n.img}" style="width:100%; border-radius:15px; margin-top:15px;">` : ''}
                                </div>
                            `).join('')}
                        </div>`;
                }
            });
        }

        init();
    </script>
</body>
</html>
 
